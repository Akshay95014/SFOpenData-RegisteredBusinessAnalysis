<div>
    <h3>City-Search for Businesses</h3>

    <!-- Find business records based on location_city -->
    Find businesses based on location city
    <form name="searchByLocationCity" ng-submit="getBusinessesByCity(location_city)">
        <input type="search" required="" placeholder="Ex: Cupertino or Boston" ng-model="location_city" />
        <input type="submit" value="Search" />
    </form>


    <!-- Print the error if there is one -->
    {{error}}

    <!-- Businesses from the requested city -->
    <div ng-show="queryData">
        <h2>Business Results</h2>
        <table>
            <thead>
                <tr>
                    <th>Business Name</th>
                    <th>Business Location</th>
                    <th>Business Start Date</th>
                    <th>Business End Date</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="entry in queryData">
                    <td>{{entry.dba_name}}</td>
                    <td>{{entry.location_city | capitalize}} <span ng-show="entry.location_city">, </span>{{entry.location_state | uppercase}}</td>
                    <td>{{entry.dba_start_date | date : longDate}}</td>
                    <td>{{entry.dba_end_date | date : longDate}}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- # Businesses Per District -->
    <div ng-show="businessByDistrict">
        <h2>Business by District (Raw Data)</h2>
        <table>
            <thead>
                <tr>
                    <th>Supervisory District</th>
                    <th>Number of Businesses</th>
                    <th>Details</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="bizByDist in businessByDistrict | orderBy: 'supervisor_district'">
                    <td ng-show="bizByDist.supervisor_district">{{bizByDist.supervisor_district | number}}</td>
                    <td ng-hide="bizByDist.supervisor_district">Unlabelled</td>
                    <td>{{bizByDist.count | number}}</td>
                    <td><a href="#/district/{{bizByDist.supervisor_district}}">Details</a></td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- # Businesses Per Industry -->
    <div ng-show="businessByIndustry">
        <h2>Business by Industry (Raw Data)</h2>
        <table>
            <thead>
                <tr>
                    <th>NAIC Code Description / Industry</th>
                    <th>Number of Businesses</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="bizByIndustry in businessByIndustry | orderBy: 'count'">
                    <td ng-show="bizByIndustry.industry">{{bizByIndustry.industry}}</td>
                    <td ng-hide="bizByIndustry.industry">Unlabelled</td>
                    <td>{{bizByIndustry.count | number}}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- # Businesses Per Year -->
    <div ng-show="businessesByYear">
        <h2>Business by Year (Raw Data)</h2>
        <table>
            <thead>
                <tr>
                    <th>Year</th>
                    <!-- <th>Number of Active Businesses</th> -->
                    <th>Number of Businesses Opened</th>
                    <th>Number of Businesses Closed</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="bizByYear in businessesByYear | orderBy: '-year'">
                    <td ng-show="bizByYear.year">{{bizByYear.year | date : 'yyyy'}}</td>
                    <td ng-hide="bizByYear.year">Unlabelled</td>
                    <!-- <td>{{bizByYear.activeBusinesses | number}}</td> -->
                    <td>{{bizByYear.openedBusinesses | number}}</td>
                    <td>{{bizByYear.closedBusinesses | number}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
